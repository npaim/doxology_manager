{% extends "base.html" %}

{% block title %}Service Calendar{% endblock %}

{% block content %}

<h1>Service Calendar — {{ month }}/{{ year }}</h1>

<div class="calendar-nav">
  <a href="/?year={{ year }}&month={{ month - 1 }}">← Prev</a>
  <a href="/?year={{ year }}&month={{ month + 1 }}">Next →</a>
</div>

<!-- Weekday header -->
<div class="calendar-grid header">
  <div>Mon</div>
  <div>Tue</div>
  <div>Wed</div>
  <div>Thu</div>
  <div>Fri</div>
  <div>Sat</div>
  <div>Sun</div>
</div>

<!-- Calendar body -->
<div class="calendar-grid">

  {% for week in weeks %}
    {% for day in week %}

      <a
        href="/services/new?date={{ day.isoformat() }}"
        class="calendar-cell {% if day.month != month %}muted{% endif %}"
      >

        <div class="date">{{ day.day }}</div>

        {% for service in service_map.get(day, []) %}
          <div class="service-card">
            <strong>{{ service.preacher or "TBD" }}</strong><br>
            <small>{{ service.responsible or "TBD" }}</small>
          </div>
        {% endfor %}

        </a>

    {% endfor %}
  {% endfor %}

</div>

<a class="new-service-btn" href="/services/new">+ Schedule Service</a>

{% endblock %}